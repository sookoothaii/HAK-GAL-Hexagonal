<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAK/GAL Governance Monitor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h2 {
            margin-bottom: 15px;
            font-size: 1.3em;
            color: #64b5f6;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }
        
        .metric-value {
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .status-good {
            color: #4caf50;
        }
        
        .status-warning {
            color: #ff9800;
        }
        
        .status-error {
            color: #f44336;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            transition: width 0.5s ease;
        }
        
        .button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin: 5px;
            transition: background 0.3s;
        }
        
        .button:hover {
            background: #45a049;
        }
        
        .button.danger {
            background: #f44336;
        }
        
        .button.danger:hover {
            background: #da190b;
        }
        
        #logs {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9em;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #4caf50;
        }
        
        .log-entry.error {
            border-left-color: #f44336;
        }
        
        .log-entry.warning {
            border-left-color: #ff9800;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ°Ô∏è HAK/GAL Governance Monitor</h1>
        
        <div class="dashboard">
            <!-- System Status -->
            <div class="card">
                <h2>System Status</h2>
                <div class="metric">
                    <span>Governance Mode</span>
                    <span class="metric-value status-good">STRICT</span>
                </div>
                <div class="metric">
                    <span>Database</span>
                    <span class="metric-value status-good">CONNECTED</span>
                </div>
                <div class="metric">
                    <span>Audit Logger</span>
                    <span class="metric-value status-good">ACTIVE</span>
                </div>
                <div class="metric">
                    <span>Kill Switch</span>
                    <span class="metric-value status-good">ARMED</span>
                </div>
            </div>
            
            <!-- Performance Metrics -->
            <div class="card">
                <h2>Performance Metrics</h2>
                <div class="metric">
                    <span>Avg Latency</span>
                    <span class="metric-value" id="avg-latency">12.5ms</span>
                </div>
                <div class="metric">
                    <span>Max Latency</span>
                    <span class="metric-value" id="max-latency">45.2ms</span>
                </div>
                <div class="metric">
                    <span>SLO Status</span>
                    <span class="metric-value status-good">‚úì WITHIN</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 12.5%"></div>
                </div>
                <small>Target: <100ms</small>
            </div>
            
            <!-- Governance Stats -->
            <div class="card">
                <h2>Governance Statistics</h2>
                <div class="metric">
                    <span>Total Requests</span>
                    <span class="metric-value" id="total-requests">4,225</span>
                </div>
                <div class="metric">
                    <span>Approved</span>
                    <span class="metric-value status-good">4,211</span>
                </div>
                <div class="metric">
                    <span>Denied</span>
                    <span class="metric-value status-warning">14</span>
                </div>
                <div class="metric">
                    <span>Success Rate</span>
                    <span class="metric-value">99.7%</span>
                </div>
            </div>
            
            <!-- Engine Status -->
            <div class="card">
                <h2>Engine Status</h2>
                <div class="metric">
                    <span>Aethelred</span>
                    <span class="metric-value status-good">RUNNING</span>
                </div>
                <div class="metric">
                    <span>Thesis</span>
                    <span class="metric-value status-warning">IDLE</span>
                </div>
                <div class="metric">
                    <span>Facts/min</span>
                    <span class="metric-value">8.5</span>
                </div>
                <div class="metric">
                    <span>Total Facts</span>
                    <span class="metric-value">4,239</span>
                </div>
            </div>
        </div>
        
        <!-- Controls -->
        <div class="card">
            <h2>System Controls</h2>
            <button class="button" onclick="testGovernance()">Test Governance</button>
            <button class="button" onclick="refreshStats()">Refresh Stats</button>
            <button class="button" onclick="viewAuditLog()">View Audit Log</button>
            <button class="button danger" onclick="activateKillSwitch()">KILL SWITCH</button>
        </div>
        
        <!-- Live Logs -->
        <div class="card">
            <h2>Live Activity Log</h2>
            <div id="logs">
                <div class="log-entry">‚úÖ System initialized - Governance v2.2 active</div>
                <div class="log-entry">‚úÖ Aethelred Engine: Added 5 facts with governance</div>
                <div class="log-entry warning">‚ö†Ô∏è Thesis Engine: Denied 2 facts (harm threshold)</div>
                <div class="log-entry">‚úÖ Audit chain integrity verified</div>
                <div class="log-entry">‚úÖ Performance: 12.5ms average (within SLO)</div>
            </div>
        </div>
    </div>
    
    <script>
        // Simulated real-time updates
        let requestCount = 4225;
        
        function updateMetrics() {
            // Simulate metric updates
            const avgLatency = (Math.random() * 30 + 5).toFixed(1);
            const maxLatency = (Math.random() * 50 + 20).toFixed(1);
            
            document.getElementById('avg-latency').textContent = avgLatency + 'ms';
            document.getElementById('max-latency').textContent = maxLatency + 'ms';
            
            // Update progress bar
            const progress = document.querySelector('.progress-fill');
            progress.style.width = (parseFloat(avgLatency) / 100 * 100) + '%';
            
            // Update request count
            requestCount += Math.floor(Math.random() * 3);
            document.getElementById('total-requests').textContent = requestCount.toLocaleString();
            
            // Add random log entry
            if (Math.random() > 0.7) {
                addLogEntry();
            }
        }
        
        function addLogEntry() {
            const logs = document.getElementById('logs');
            const messages = [
                '‚úÖ Governance check passed for batch of 10 facts',
                '‚úÖ Audit entry added: hash=a3f5b2c1...',
                '‚ö†Ô∏è Performance warning: 85ms latency spike',
                '‚úÖ Database checkpoint completed',
                '‚úÖ Facts validated and added to knowledge base'
            ];
            
            const message = messages[Math.floor(Math.random() * messages.length)];
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            if (message.includes('‚ö†Ô∏è')) entry.className += ' warning';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            
            logs.insertBefore(entry, logs.firstChild);
            
            // Keep only last 20 entries
            while (logs.children.length > 20) {
                logs.removeChild(logs.lastChild);
            }
        }
        
        function testGovernance() {
            alert('Running governance test...\nCheck console for results.');
            addLogEntry();
        }
        
        function refreshStats() {
            updateMetrics();
            addLogEntry();
        }
        
        function viewAuditLog() {
            alert('Opening audit log viewer...');
        }
        
        function activateKillSwitch() {
            if (confirm('‚ö†Ô∏è WARNING: This will shutdown the system!\nAre you sure?')) {
                if (confirm('‚ö†Ô∏è FINAL WARNING: This action cannot be undone!\nReally activate kill switch?')) {
                    alert('üõë KILL SWITCH ACTIVATED\nSystem shutting down...');
                    document.body.style.background = 'linear-gradient(135deg, #8B0000 0%, #DC143C 100%)';
                }
            }
        }
        
        // Update metrics every 2 seconds
        setInterval(updateMetrics, 2000);
        
        // Initial update
        updateMetrics();
    </script>
</body>
</html>
